<h1>Carrito de Compras</h1>

{{#if products.length}}
<ul>
    {{#each products}}
    <li>
        <h3>{{this.product.name}}</h3>
        <p>Precio: ${{this.product.price}}</p>
        <p>Cantidad: {{this.quantity}}</p>
        <form action="/api/carts/{{cartId}}/products/{{this.product._id}}" method="POST">
            <input type="number" name="quantity" value="{{this.quantity}}" min="1">
            <button type="submit">Actualizar cantidad</button>
        </form>
        <form action="/api/carts/{{cartId}}/products/{{this.product._id}}" method="POST">
            <input type="hidden" name="_method" value="DELETE">
            <button type="submit">Eliminar</button>
        </form>
    </li>
    {{/each}}
</ul>
{{else}}
<p>No hay productos en este carrito.</p>
{{/if}}

<form action="/api/carts/{{cartId}}" method="POST">
    <input type="hidden" name="_method" value="DELETE">
    <button type="submit">Vaciar Carrito</button>
</form>

<a href="/products">Volver a productos</a>
